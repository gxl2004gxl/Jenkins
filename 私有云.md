# controller

`vi /etc/sysconfig/network-scripts/ifcf-ens33`

```sh
static
yes
IPADDR=192.168.123.10
PREFIX=24
GATEWAY=192.168.123.2
```

`hostnamectl set-hostname controller`

`bash`

`service network restart`

`systemctl stop firewalld`

`systemctl disable firewalld`

`setenforce 0`

`vi /etc/hosts`

```sh
192.168.123.10 controller
192.168.123.11 compute
```

+++



# compute

`vi /etc/sysconfig/network-scripts/ifcfg-ens33`

```sh
static
yes
IPADDR=192.168.123.11
PREFIX=24
GATEWAY=192.168.123.2
```

`hostnamectl set-hostname compute`

`bash`

`systemctl stop firewalld `

`systemctl disable firewalld`

`setenforce 0`

``scp /etc/hosts 192.168.123.11:/etc/hosts``

+++

# controller

```sh
mount /root/Centos	/mnt
mkdir /opt/{centos,iaas}
cp -rvf /mnt/* /opt/centos
umount /mnt
mount /root/chis	/mnt
cp -rvf /mnt/* /opt/iaas
umount /mnt
```

```sh
mv /yum.repo.d/* /tmp
vi /etc/yum.repo.d/centos.repo
[centos]
name=centos
baseurl=file:///opt/centos
gpgcheck=0
enabled=1
[iaas]
name=iaas
baseurl=file:///opt/iaas/iaas-repo
gpgcheck=0
enabled=1
```

`scp /etc/yum.repo.d/centos.repo compute:/etc/yum.repo.d/centos.repo`



+++



# compute



```sh
mv /yum.repo.d/* /tmp
vi /etc/yum.repo.d/centos.repo
[centos]
name=centos
baseurl=ftp://controller/centos
gpgcheck=0
enabled=1
[iaas]
name=iaas
baseurl=ftp://controller/iaas/iaas-repo
gpgcheck=0
enabled=1
```

+++

# controller

```sh
yum install -y vsftpd
vi /etc/vsftpd/vsftpd.conf
#anon_root=/opt/
systemctl start vsftpd
systemctl enable vsftpd
yum install -y openstack-iaas
vi /etc/openstack/openrc.sh
:%s/#//
:%s/PASS=/PASS=000000
192.168.123.10
controller
192.168.123.11
compute
192.168.123.0/24
openstack
demo
ens34
provider
1
1000
sdb1
sdb2
sdb3
:wq
scp /etc/openstack/openrc.sh compute:/etc/openstack/openrc.sh
```

+++

# compute

```sh
yum install -y openstack-iaas
```

# 脚本

## controller

```sh
“iaas-pre-host.sh”
reboot
iaas-install-mysql.sh "数据库"
iaas-install-keyone.sh "用户身份认证和管理"
iaas-install-glance.sh "镜像服务"
iaas-install-placement.sh ""
```

## controller,compute

```sh
iaas-install-nova-controller.sh 
iaas-install-nova-compute.sh
iaas-install-neutron.controller.sh
iaas-install-neutron.compute.sh
"iaas-install-dashboard.sh"
iaas-install-cinder.controller.sh "卷组服务"
iaas-install-cinder.compute.sh
iaas-install-swift.controller.sh
iaas-install-swirt.compute.sh
```

`cat /etc/lo	.txt`

```java
public class gxl{
  public static void main(String args []){
    			System.out.println("Hello World"); 
  		 Scanner gxl =new Scanner(System.in);
    java=gxl.nextInt();
    	if (java>60)
    {
      System.out.println("及格");
      System.out.println("真的捞");
      }
    else
      System.out.println("不及格");
      System.out.println("真的捞");
  }
}
```

# controller

```sh
vi /etc/sysconfig/network-scripts/ifcfg-ens160
static
yes
IPADDR=192.168.125.10
PREFIX=24
GATEWAY=192.168.125.2
DNS1=114.114.114.114
DNS2=8.8.8.8
:wq
service network restart
systemctl disable firewalld --now
setenforce 0
vi /etc/hosts
192.168.125.10 controller
192.168.125.11 compute
scp /etc/hosts 192.168.125.11:/etc/hosts
```

# compute

```sh
vi /etc/sysconfig/network-scripts/ifcfg-ens160
static
yes
IPADDR=192.168.125.11
PREFIX=24
GATEWAY=192.168.125.2
DNS1=114.114.114.114
DNS2=8.8.8.8
:wq
service network restart
systemctl disable firewalld --now
setenforce 0
```

# controller

```sh
mount /root/Centos	/mnt
mkdir /opt/{centos,iaas}
cp -rvf /mnt/* /opt/centos
umount /mnt
mount /root/chis	/mnt
cp -rvf /mnt/* /opt/iaas
umount /mnt
mv /etc/yum.repo.d/* /tmp
vi /etc/yum.repo.d/centos.repo
[centos]
name=centos
baseurl=file:///opt/centos
gpgcheck=0
enabled=1
[iaas]
name=iaas
baseurl=file:///opt/iaas/iaas-repo
gpgcheck=0
enabled=1
"scp /etc/yum.repo.d/centos.repo compute:/etc/yum.repo.d/centos-repo"
```

# compute

```sh
mount /root/Centos	/mnt
mkdir /opt/{centos,iaas}
cp -rvf /mnt/* /opt/centos
umount /mnt
mount /root/chis	/mnt
cp -rvf /mnt/* /opt/iaas
umount /mnt
mv /etc/yum.repo.d/* /tmp
```

# controller

```sh
vi /etc/yum.repo.d/centos.repo
name=centos
baseurl=ftp://controller/centos
gpgcheck=0
enabled=1
[iaas]
name=iaas
baseurl=ftp://controller/iaas/iaas-repo
gpgcheck=0
enabled=1
```

# controller

```sh
yum install -y vsftpd
vi /etc/vsftpd/vsftpd.conf
anon_root=/opt/
systemctl enable vsftpd --now
yum install -y openstack-iaas
vi /etc/openstack/openr.sh
:%s/#//
:%s/PASS=/PASS=000000
controller
000000
192.168.125.10
controller
000000
192.168.125.11
compute
192.168.125.0/24
provider
demo
1
1000
sdb1
sdb2
sdb3
scp /etc/openstack/openr.sh compute:/etc/openstack/openr.sh
```

# compute

```sh
yum install -y openstack-iaas
```

# 脚本

## controller-compute

```sh
iaas-pre.host.sh
reboot
```

## controller

```sh
iaas-install-mysql.sh
iaas-install-keyone.sh
iaas-install-glance.sh
iaas-install-placement.sh
```

## controller-compute

```sh
iaas-install-nova.controller.sh
iaas-install-nova.compute.sh
```

## controller-compute

```sh
iaas-install-neutron.controller.sh
iaas-install-neutron.compute.sh
```

## controller

```sh
iaas-install-dashboard.sh
```



## controller-compute

```sh
iaas-install-cinder.controller.sh
iaas-install-cinder.compute.sh
iaas-install-swift.controller.sh
iaas-install-swift.compute.sh
```

```bash
hostnamectl set-hostname controller
bash
mv /etc/yum.repos.d/* /opt
vi /etc/yum.repos.d/local.repo
[centos]
name=centos
baseurl=file:///opt/centos
gpgcheck=0
enabled=1
[iaas]
name=iaas
baseurlp=file:///opt/iaas/iaas-repo
gpgcheck=0
enabled=1
:wq
yum repolist
yum install -y vsftpd
vi /etc/vsftpd/vsftpd.conf
anon_root=/opt/
:wq
systemctl restart vsftpd
systemctl status vsftpd
vi /etc/hosts
192.168.232.10 controller
192.168.232.20 compute
:wq
scp /etc/hosts 192.168.232.20:/etc/hosts
vi /etc/sysconfig/network-script/ifcf-ens32
static
yes
IPADDR=192.168.232.10
PREFIX=24
GATEWAY=192.168.232.2
DNS1=114.114.114.114
DSN2=8.8.8.8
:wq
systemctl restart network
systemctl status network
setenforce 0
yum install -y openstack-iaas
:wq
```
